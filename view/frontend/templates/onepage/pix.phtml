<?php

use Vindi\Payment\Block\Onepage\Pix;

/** @var $block Pix */
?>

<?php if ($block->canShowPix()) : ?>
    <br/>

    <object data="<?= $block->getQrCodePix() ?>" type="image/svg+xml" class="qr-code" id="qrcode">
        <?= $block->getQrCodeWarningMessage() ?>
        <button
            id="vindi-pix-button-open"
            type="button"
            class="action primary checkout"
            title="Open QR Code Pix"
            onclick="window.open('<?= $block->getQrCodePix() ?>', '_blank')">
            <?php echo __('Open QR Code') ?>
        </button>
    </object>
    <br/>

    <div data-bind="scope: 'vindiPix'">
        <!-- ko template: getTemplate() --><!-- /ko -->
    </div>

    <script type="text/x-magento-init">
        {
            "*": {
                "Magento_Ui/js/core/app": {
                    "components": {
                        "vindiPix": {
                            "component": "Vindi_Payment/js/view/onepage/vindi-pix",
                            "qrCodeKey": <?= $block->getQrcodeOriginalPath() ?>
                        }
                    }
                }
            }
        }
    </script>

<?php endif; ?>
